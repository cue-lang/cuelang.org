# Test that CDD mode enables cldd processing logic for all content
# This demonstrates that step blocks work in CDD mode (which requires cldd processing)

mkdir output

# Run the preprocessor in CDD mode
exec preprocessor execute --cdd --cddoutputdir=output

# Verify the step was processed and output file was created
cmp output/step_test/index.md golden/output/step_test/index.md

-- content/step_test/en.md --
---
title: Step test in CDD mode
---

This tests step functionality in CDD mode.

{{{with step "en" "demo step"}}}
echo "Hello from CDD mode"
{{{end}}}

-- content/step_test/site.cue --
package site

content: step_test: page: {
	leftDelim:  "{{{"
	rightDelim: "}}}"
}

-- golden/output/step_test/index.md --
---
title: Step test in CDD mode
---

This tests step functionality in CDD mode.

[**:material-chevron-right-circle-outline: Step 1**](#step-1){id="step-1"}: echo "Hello from CDD mode"

---


