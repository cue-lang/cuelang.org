<!doctype html>
<html lang="en" dir="ltr" class="no-js">
    <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Source: https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows Driving GitHub Actions workflows with CUE by Jonathan …">
<meta name="generator" content="Hugo 0.128.2">

<meta name="robots" content="noindex, nofollow">

<link rel="canonical" href="https://cuelang.org/docs/draft/cbe-001_github_actions_importing_workflows/" />
<link rel="shortcut icon" href="/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/webmanifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#232a68">
<meta name="msapplication-TileColor" content="#232a68">
<meta name="msapplication-config" content="/favicons/browserconfig.xml">
<meta name="theme-color" content="#232a68">

<title>CUE By Example - Driving GitHub Actions workflows with CUE | CUE</title><meta property="og:url" content="/docs/draft/cbe-001_github_actions_importing_workflows/">
  <meta property="og:site_name" content="CUE">
  <meta property="og:title" content="CUE By Example - Driving GitHub Actions workflows with CUE">
  <meta property="og:description" content="Source: https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows Driving GitHub Actions workflows with CUE by Jonathan Matthews
This guide explains how to convert GitHub Actions workflow files from YAML to CUE, check those workflows are valid, and then use CUE’s tooling layer to regenerate YAML.
This allows you to switch to CUE as a source of truth for GitHub Actions workflows and perform client-side validation, without GitHub needing to know you’re managing your workflows with CUE.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2025-04-08T13:31:31+01:00">
    <meta property="og:image" content="/img/social.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="/img/social.png">
  <meta name="twitter:title" content="CUE By Example - Driving GitHub Actions workflows with CUE">
  <meta name="twitter:description" content="Source: https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows Driving GitHub Actions workflows with CUE by Jonathan Matthews
This guide explains how to convert GitHub Actions workflow files from YAML to CUE, check those workflows are valid, and then use CUE’s tooling layer to regenerate YAML.
This allows you to switch to CUE as a source of truth for GitHub Actions workflows and perform client-side validation, without GitHub needing to know you’re managing your workflows with CUE.">





<link rel="preload" href="/scss/main.min.5f958419895202b4511c3d207a9db7e3dc877eddb9992250d095086969c7b1c4.css" as="style">
<link href="/scss/main.min.5f958419895202b4511c3d207a9db7e3dc877eddb9992250d095086969c7b1c4.css" rel="stylesheet" integrity="">



<link rel="preload" href="/fonts/inter/regular.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/inter/500.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/inter/700.woff2" as="font" crossorigin="anonymous">



<script>(()=>{document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js")})()</script>
</head>
    <body itemscope itemtype="https://schema.org/WebPage">
        <meta itemprop="name" content="CUE By Example - Driving GitHub Actions workflows with CUE">
<meta itemprop="description" content="Source: https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows Driving GitHub Actions workflows with CUE by Jonathan Matthews
This guide explains how to convert GitHub Actions workflow files from YAML to CUE, check those workflows are valid, and then use CUE&rsquo;s tooling layer to regenerate YAML.
This allows you to switch to CUE as a source of truth for GitHub Actions workflows and perform client-side validation, without GitHub needing to know you&rsquo;re managing your workflows with CUE.">

    
        <meta itemprop="dateModified" content="2025-04-08T13:31:31+01:00" >
    
            
        <meta itemprop="image" content="/img/social.png"/>
            
    <meta itemprop="keywords" content="" />

        <a id="skip-nav" class="skip-link" href="#site-main" target="_self">Skip to content</a>

        <div class="site">
            <header id="site-header" class="site__header">
                

<div class="header header--wide" data-header>
    <div class="header__container">
        <div class="header__background"></div>

        <div class="header__branding">
            <a href="/" class="header__logo" rel="home">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path class="logo__letters" d="M39.555 50.355c-6.853.0-11.907 5.133-11.907 13.602s5.027 13.602 11.907 13.602c5.818.0 10.073-3.648 10.94-8.883l-4.034-.012c-.686 3.389-3.532 5.252-6.88 5.252-4.541.0-7.968-3.533-7.968-9.957s3.414-9.955 7.979-9.955c3.373.0 6.207 1.902 6.865 5.328l.004-.002h4.033c-.906-5.664-5.34-8.975-10.94-8.975zm38.748.362-.002.004h.002zm0 .004v26.478H96.07v-3.44H82.297v-8.105h12.752V62.23H82.297V54.16h13.617v-3.44zm-24.823.0v17.521c0 5.974 4.651 9.4 10.51 9.4 5.86.0 10.528-3.426 10.528-9.4V50.721h-3.995v17.457c0 3.711-2.985 5.793-6.529 5.793s-6.517-2.082-6.517-5.793V50.72z"/><path class="logo__inner" d="M64 9.586C33.947 9.586 9.586 33.947 9.586 64S33.947 118.414 64 118.414 118.414 94.053 118.414 64 94.05 9.586 64 9.586zm0 105.973c-28.476.0-51.562-23.086-51.562-51.562S35.524 12.438 64 12.438 115.562 35.524 115.562 64 92.476 115.562 64 115.562z"/><path class="logo__outer" d="M64 0C28.653.0.0 28.653.0 64s28.653 64 64 64 64-28.653 64-64S99.347.0 64 0zm0 121.843C32.054 121.843 6.157 95.946 6.157 64S32.054 6.157 64 6.157 121.843 32.054 121.843 64 95.946 121.843 64 121.843z"/></svg>
                <span>Homepage of CUE</span>
            </a>
        </div>

        <div class="header__main">
            <nav class="nav nav--main" aria-label="Main menu">
                <ul class="nav__list">
                    
                        <li class="nav__item"><a class="nav__link"
                               href="/docs/"><span class="nav__text">Documentation</span></a>
                        </li>
                    
                        <li class="nav__item"><a class="nav__link"
                               href="/play/"><span class="nav__text">Play</span></a>
                        </li>
                    
                        <li class="nav__item"><a class="nav__link"
                               href="/community/"><span class="nav__text">Community</span></a>
                        </li>
                    
                </ul>
            </nav>
        </div>

        <div class="header__secondary">
            <div class="header__icons">
                <nav class="nav nav--social" aria-label="Social">
                    <ul class="nav__list"><li class="nav__item"><a class="nav__link"
                                   href="https://github.com/cue-lang/cue" target="_blank">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--github"></use>
</svg>

                                    <span class="nav__text">GitHub</span>
                                </a>
                            </li><li class="nav__item"><a class="nav__link"
                                   href="/s/slack">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--slack"></use>
</svg>

                                    <span class="nav__text">Slack</span>
                                </a>
                            </li><li class="nav__item"><a class="nav__link"
                                   href="/s/discord">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-discord"></use>
</svg>

                                    <span class="nav__text">Discord</span>
                                </a>
                            </li><li class="nav__item"><a class="nav__link"
                                   href="https://twitter.com/cue_lang" target="_blank">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-x"></use>
</svg>

                                    <span class="nav__text">X (Twitter)</span>
                                </a>
                            </li><li class="nav__item"><a class="nav__link"
                                   href="https://bsky.app/profile/cuelang.org" target="_blank">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-bluesky"></use>
</svg>

                                    <span class="nav__text">Bluesky</span>
                                </a>
                            </li><li class="nav__item"><a class="nav__link"
                                   href="https://www.youtube.com/@cuelang/videos" target="_blank">
                                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-youtube"></use>
</svg>

                                    <span class="nav__text">YouTube</span>
                                </a>
                            </li></ul>
                </nav>
            </div>

            <div class="header__cta"><a class="button button--skinny"
                       href="/docs/introduction/installation/"><span class="button__text">Install</span>



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--download"></use>
</svg>
</a></div>

            <div class="header__search" data-menu>
                <a href="/search" class="button button--icon button--white-simple" rel="search" data-menu-dropdown="header-dropdown-search">



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--search"></use>
</svg>
<span>Search</span>
                </a>

                <div class="header__dropdown header__dropdown--search" data-menu-dropdown-target="header-dropdown-search">
                    <p class="header__search-title">What are you looking for?</p>





<div data-search-autocomplete="menu"
     data-searchbar-size="small"
     data-searchbar-placeholder=""
>
    <div id="autocomplete-menu"></div>
</div>
</div>
            </div>

            <div class="header__toggle">
                <button class="button button--outline" data-drawer-toggle="menu" aria-haspopup="menu" aria-expanded="false" aria-controls="mobile-menu">
                    <span class="button__text">Menu</span>



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--menu"></use>
</svg>
</button>
            </div>
        </div>
    </div>
</div>

            </header>

            <main id="site-main" class="site__content" itemprop="mainContentOfPage">
                

    <div class="docs" data-docs>
        <div class="docs__main">
            <nav class="breadcrumb" aria-label="breadcrumb">
    <ol class="breadcrumb__list">
    

    
    

    
        <li class="breadcrumb__item"><a class="breadcrumb__link" href="/docs/draft/">Drafts</a></li>
    
    

    
        <li class="breadcrumb__item" aria-current="page"><h1 class="breadcrumb__text">CUE By Example - Driving GitHub Actions workflows with CUE</h1></li>
    
    </ol>
</nav>


            <article class="article article--docs" itemscope itemtype="https://schema.org/TechArticle">
                <meta itemprop="articleBody" content="




    

Source: https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows



    




    

Driving GitHub Actions workflows with CUE
by Jonathan Matthews
This guide explains how to convert GitHub Actions workflow files from YAML to
CUE, check those workflows are valid, and then use CUE&rsquo;s tooling layer to
regenerate YAML.
This allows you to switch to CUE as a source of truth for GitHub Actions
workflows and perform client-side validation, without GitHub needing to know
you&rsquo;re managing your workflows with CUE.



:exclamation: WARNING :exclamation:




This guide requires that you use cue version v0.11.0-alpha.2 or later. The process described below won&rsquo;t work with earlier versions. Check the version of your cue command by running cue version, and upgrade it if needed.




    




    

Prerequisites

You have a set of GitHub Actions workflow files.

The examples shown in this guide use the state of the first commit of CUE&rsquo;s
github-actions-example
repository, but you don&rsquo;t need to use that repository in any way.


You have
CUE installed
locally &ndash; this allows you to run cue commands

You must have version v0.11.0-alpha.2 or later installed.


You have a GitHub account &ndash; this allows you to use the
CUE Central Registry.
You have a Central Registry account &ndash; this
allows you to fetch a schema to validate your GitHub Actions workflows.
You have git installed.


    




    

Steps

    




    

Convert YAML workflows to CUE

    




    

:arrow_right: Begin with a clean git state
Change directory into the root of the repository that contains your GitHub
Actions workflow files, and ensure you start this process with a clean git
state, with no modified files. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cd github-actions-example # our example repository
$ git status # should report &#34;working tree clean&#34;
On branch master
nothing to commit, working tree clean


    




    

:arrow_right: Initialise a CUE module
Initialise a CUE module named after the organisation and repository you&rsquo;re
working with. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue mod init github.com/cue-examples/github-actions-example


    




    

:arrow_right: Import YAML workflows
Use cue to import your YAML workflow files:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue import ./.github/workflows/ --with-context -p github -f -l workflows: -l &#39;strings.TrimSuffix(path.Base(filename),path.Ext(filename))&#39;

Check that a CUE file has been created for each YAML workflow in the
.github/workflows directory. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            # Actual command in CUE-By-Example guide:
# ls .github/workflows/
$ ls .github/workflows/ &gt;../4.actual.txt

Your output should look similar to this, with matching pairs of YAML and CUE
files:







            




    


                            Copied!
                        
                    4.expected.txt
            
        


                Copy code
                
                    Copied!
                
            workflow1.cue
workflow1.yml
workflow2.cue
workflow2.yml






Observe that each workflow has been imported into the workflows struct, at a
location derived from its original file name:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            # Actual command in CUE-By-Example guide:
# head -5 .github/workflows/*.cue
$ head -5 .github/workflows/*.cue &gt;../5.actual.txt

The output should reflect your workflows. In our example:







            




    


                            Copied!
                        
                    5.expected.txt
            
        


                Copy code
                
                    Copied!
                
            ==&gt; .github/workflows/workflow1.cue &lt;==
package github

workflows: workflow1: {
	on: [
		&#34;push&#34;,

==&gt; .github/workflows/workflow2.cue &lt;==
package github

workflows: workflow2: {
	on: [
		&#34;push&#34;,







    




    

:arrow_right: Store CUE workflows in a dedicated directory
Create a directory called github to hold your CUE-based GitHub Actions
workflow files. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ mkdir -p internal/ci/github

You may change the hierarchy and naming of github&rsquo;s parent directories to
suit your repository layout. If you do so, you will need to adapt some commands
and CUE code as you follow this guide.
Move the newly-created CUE files into their dedicated directory. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ mv ./.github/workflows/*.cue internal/ci/github


    




    

Validate workflows

    




    

:arrow_right: Authenticate the cue command against the CUE Central Registry
Run this command, and follow the instructions it displays:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue login

This will allow you to fetch modules from the Central Registry.

    




    

:arrow_right: Add a dependency on a GitHub Actions module
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue mod get github.com/cue-tmp/jsonschema-pub/exp1/githubactions@v0.3.0

This command specifies a precise version of the GitHub Actions module in order
to make sure that this process is reproducible.
The GitHub Actions module looks like it has a temporary location because it
was created as part of the CUE project&rsquo;s work to figure out how and where to
store third-party schemas. Whilst it will eventually live at a more permanent
and appropriate location (which will then be reflected in this guide), this
version of the module won&rsquo;t disappear from its &ldquo;temporary&rdquo; location - so it&rsquo;s
safe to use!

    




    

:arrow_right: Apply the schema
We need to tell CUE to apply the schema to each workflow.
To do this we&rsquo;ll create a file at internal/ci/github/workflows.cue in our
example.
However, if the workflow imports that you performed earlier already created a
file with that same path and name, then simply select a different CUE filename
that doesn&rsquo;t already exist. Place the file in the internal/ci/github/
directory.
:floppy_disk: internal/ci/github/workflows.cue







            




    


                            Copied!
                        
                    github-actions-example/internal/ci/github/workflows.cue
            
        


                Copy code
                
                    Copied!
                
            package github

import &#34;github.com/cue-tmp/jsonschema-pub/exp1/githubactions&#34;

// Each member of the workflows struct must be a valid #Workflow.
workflows: [_]: githubactions.#Workflow







    




    

:arrow_right: Validate your workflows
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue vet -c ./internal/ci/github

If this command fails and produces any output, then CUE believes that at least
one of your workflows isn&rsquo;t valid. It&rsquo;s very likely that CUE is correct (and
has found a problem) even if GitHub Actions manages to process your workflow
files successfully &ndash; because GitHub Actions can be lax and overly permissive
in enforcing its own schema rules!  You&rsquo;ll need to resolve this before
continuing, by updating your workflows inside your new CUE files. If you&rsquo;re
having difficulty fixing them, please come and ask for help in the friendly CUE
Slack workspace or
Discord server!

    




    

Generate YAML from CUE

    




    

:arrow_right: Create a CUE workflow command
Create a CUE file at internal/ci/github/ci_tool.cue, containing the following workflow command.
Adapt the element commented with TODO:
:floppy_disk: internal/ci/github/ci_tool.cue







            




    


                            Copied!
                        
                    github-actions-example/internal/ci/github/ci_tool.cue
            
        


                Copy code
                
                    Copied!
                
            package github

import (
	&#34;path&#34;
	&#34;encoding/yaml&#34;
	&#34;tool/file&#34;
)

_goos: string @tag(os,var=os)

// Regenerate all workflow files
command: regenerate: {
	workflow_files: {
		// TODO: update _toolFile to reflect the directory hierarchy containing this file.
		let _toolFile = &#34;internal/ci/github/ci_tool.cue&#34;
		let _workflowDir = path.FromSlash(&#34;.github/workflows&#34;, path.Unix)
		let _donotedit = &#34;Code generated by \(_toolFile); DO NOT EDIT.&#34;

		clean: {
			glob: file.Glob &amp; {
				glob: path.Join([_workflowDir, &#34;*.yml&#34;], _goos)
				files: [...string]
			}
			for _, _filename in glob.files {
				&#34;Delete \(_filename)&#34;: file.RemoveAll &amp; {path: _filename}
			}
		}

		create: {
			for _workflowName, _workflow in workflows
			let _filename = _workflowName &#43; &#34;.yml&#34; {
				&#34;Generate \(_filename)&#34;: file.Create &amp; {
					$after: [for v in clean {v}]
					filename: path.Join([_workflowDir, _filename], _goos)
					contents: &#34;# \(_donotedit)\n\n\(yaml.Marshal(_workflow))&#34;
				}
			}
		}
	}
}






Make the modification indicated by the TODO comment.
This workflow command will export each CUE-based workflow back into its required YAML file,
on demand.

    




    

:arrow_right: Test the CUE workflow command
With the modified ci_tool.cue file in place, check that the regenerate
workflow command is available from a shell sitting at the root of the
repository. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cd $(git rev-parse --show-toplevel) # make sure we&#39;re sitting at the repository root

# Actual command in CUE-By-Example guide:
# cue help cmd regenerate ./internal/ci/github   # the &#34;./&#34; prefix is required
$ cue help cmd regenerate ./internal/ci/github | head -4 &gt;../12.actual.txt

Your output must begin with the following:







            




    


                            Copied!
                        
                    12.expected.txt
            
        


                Copy code
                
                    Copied!
                
            Regenerate all workflow files

Usage:
  cue cmd regenerate [flags]









:exclamation: WARNING :exclamation:




If you don&rsquo;t see the usage explanation for the regenerate workflow command (or if you receive an error message) then either your workflow command isn&rsquo;t set up as CUE requires, or you&rsquo;re running a CUE version older than v0.11.0-alpha.2. If you&rsquo;ve upgraded to at least that version but the usage explanation still isn&rsquo;t being displayed then: (1) double check the contents of the ci_tool.cue file and the modifications you made to it; (2) make sure its location in the repository is precisely as given in this guide; (3) ensure the filename is exactly ci_tool.cue; (4) check that the internal/ci/github/workflows.cue file has the same contents as shown above; (5) run cue vet ./internal/ci/github and check that your workflows actually validate successfully - in other words: were they truly valid before you even started this process? Lastly, make sure you&rsquo;ve followed all the steps in this guide, and that you invoked the cue help command from the repository&rsquo;s root directory. If you get really stuck, please come and join the CUE community and ask for some help!




    




    

:arrow_right: Regenerate the YAML workflow files
Run the regenerate workflow command to produce YAML workflow files from CUE. For
example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue cmd regenerate ./internal/ci/github # the &#34;./&#34; prefix is required


    




    

:arrow_right: Audit changes to the YAML workflow files
Check that each YAML workflow file has a single change from the original:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            # Actual command in CUE-By-Example guide:
# git diff .github/workflows/
$ git diff .github/workflows/ | grep -v &#39;^index [0-9a-f]{7}\.\.[0-9a-f]{7}&#39; &gt;../14.actual.txt

Your output should look similar to the following example:







            




    


                            Copied!
                        
                    14.expected.txt
            
        


                Copy code
                
                    Copied!
                
            diff --git a/.github/workflows/workflow1.yml b/.github/workflows/workflow1.yml
--- a/.github/workflows/workflow1.yml
&#43;&#43;&#43; b/.github/workflows/workflow1.yml
@@ -1,3 &#43;1,5 @@
&#43;# Code generated by internal/ci/github/ci_tool.cue; DO NOT EDIT.
&#43;
 &#34;on&#34;:
   - push
   - pull_request
diff --git a/.github/workflows/workflow2.yml b/.github/workflows/workflow2.yml
--- a/.github/workflows/workflow2.yml
&#43;&#43;&#43; b/.github/workflows/workflow2.yml
@@ -1,3 &#43;1,5 @@
&#43;# Code generated by internal/ci/github/ci_tool.cue; DO NOT EDIT.
&#43;
 &#34;on&#34;:
   - push
   - pull_request






The only change in each YAML file is the addition of a header that warns the
reader not to edit the file directly.

    




    

:arrow_right: Add and commit files to git
Add your files to git. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ git add .github/workflows/ internal/ci/github/ cue.mod/module.cue

Make sure to include your slightly modified YAML workflow files in
.github/workflows/ along with all the new files in internal/ci/github/ and
your cue.mod/module.cue file.
Commit your files to git, with an appropriate commit message:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            # Actual command in CUE-By-Example guide:
# git commit -m &#34;ci: create CUE sources for GHA workflows&#34;
$ git commit --quiet -m &#34;ci: create CUE sources for GHA workflows&#34;


    




    

Conclusion
Well done - your GitHub Actions workflow files have been imported into CUE!
They can now be managed using CUE, leading to safer and more predictable
changes. The use of a schema to check your workflows means that you will catch
and fix many types of mistake earlier than before, without waiting for the slow
&ldquo;git add/commit/push; check if CI fails&rdquo; cycle.
From now on, each time you make a change to a CUE workflow file, immediately
regenerate the YAML files required by GitHub Actions, and commit your changes
to all the CUE and YAML files. For example:
:computer: terminal

            TERMINAL
        
                Copy code
                
                    Copied!
                
            $ cue cmd regenerate ./internal/ci/github/ # the &#34;./&#34; prefix is required
$ git add .github/workflows/ internal/ci/github/
$ git commit -m &#34;ci: added new release workflow&#34; # example message

">
<meta itemprop="wordCount" content="1779">


                <div class="article__container">
                    



<header class="article__header">
        </header>



                    <div class="article__content">
                        
                            <div class="note note--caution" role="alert">



<svg class="icon note__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--exclamation"></use>
</svg>
<div class="note__content">Source: <a href="https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows">https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows</a></div>
</div>

<h1 id="driving-github-actions-workflows-with-cue">
    <a href="#driving-github-actions-workflows-with-cue" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Driving GitHub Actions workflows with CUE</h1>
<p><sup>by <a href="https://jonathanmatthews.com">Jonathan Matthews</a></sup></p>
<p>This guide explains how to convert GitHub Actions workflow files from YAML to
CUE, check those workflows are valid, and then use CUE&rsquo;s tooling layer to
regenerate YAML.</p>
<p>This allows you to switch to CUE as a source of truth for GitHub Actions
workflows and perform client-side validation, without GitHub needing to know
you&rsquo;re managing your workflows with CUE.</p>
<table>
<thead>
<tr>
<th style="text-align:left">:exclamation: WARNING :exclamation:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">This guide requires that you use <code>cue</code> version <code>v0.11.0-alpha.2</code> or later. <strong>The process described below won&rsquo;t work with earlier versions</strong>. Check the version of your <code>cue</code> command by running <code>cue version</code>, and <a href="https://cuelang.org/dl">upgrade it</a> if needed.</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">
    <a href="#prerequisites" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Prerequisites</h2>
<ul>
<li>You have a set of GitHub Actions workflow files.
<ul>
<li>The examples shown in this guide use the state of the first commit of CUE&rsquo;s
<a href="https://github.com/cue-examples/github-actions-example/tree/2b9d2f240d0c677c30218282dc10f95dfd566453/.github/workflows">github-actions-example</a>
repository, but you don&rsquo;t need to use that repository in any way.</li>
</ul>
</li>
<li>You have
<a href="https://alpha.cuelang.org/docs/introduction/installation/">CUE installed</a>
locally &ndash; this allows you to run <code>cue</code> commands
<ul>
<li>You must have version <code>v0.11.0-alpha.2</code> or later installed.</li>
</ul>
</li>
<li>You have a <a href="https://github.com">GitHub</a> account &ndash; this allows you to use the
CUE Central Registry.</li>
<li>You have a <a href="https://registry.cue.works">Central Registry</a> account &ndash; this
allows you to fetch a schema to validate your GitHub Actions workflows.</li>
<li>You have <a href="https://git-scm.com/downloads"><code>git</code> installed</a>.</li>
</ul>
<h2 id="steps">
    <a href="#steps" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Steps</h2>
<h3 id="convert-yaml-workflows-to-cue">
    <a href="#convert-yaml-workflows-to-cue" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Convert YAML workflows to CUE</h3>
<h4 id="arrow_right-begin-with-a-clean-git-state">
    <a href="#arrow_right-begin-with-a-clean-git-state" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Begin with a clean git state</h4>
<p>Change directory into the root of the repository that contains your GitHub
Actions workflow files, and ensure you start this process with a clean git
state, with no modified files. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y2QgZ2l0aHViLWFjdGlvbnMtZXhhbXBsZSAjIG91ciBleGFtcGxlIHJlcG9zaXRvcnkKZ2l0IHN0YXR1cyAjIHNob3VsZCByZXBvcnQgIndvcmtpbmcgdHJlZSBjbGVhbiI=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cd github-actions-example # our example repository
</span></span><span style="display:flex;"><span>$ git status # should report &#34;working tree clean&#34;
</span></span><span style="display:flex;"><span>On branch master
</span></span><span style="display:flex;"><span>nothing to commit, working tree clean</span></span></code></pre></div></div>
</div>
<h4 id="arrow_right-initialise-a-cue-module">
    <a href="#arrow_right-initialise-a-cue-module" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Initialise a CUE module</h4>
<p>Initialise a CUE module named after the organisation and repository you&rsquo;re
working with. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIG1vZCBpbml0IGdpdGh1Yi5jb20vY3VlLWV4YW1wbGVzL2dpdGh1Yi1hY3Rpb25zLWV4YW1wbGU=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue mod init github.com/cue-examples/github-actions-example</span></span></code></pre></div></div>
</div>
<h4 id="arrow_right-import-yaml-workflows">
    <a href="#arrow_right-import-yaml-workflows" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Import YAML workflows</h4>
<p>Use <code>cue</code> to import your YAML workflow files:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIGltcG9ydCAuLy5naXRodWIvd29ya2Zsb3dzLyAtLXdpdGgtY29udGV4dCAtcCBnaXRodWIgLWYgLWwgd29ya2Zsb3dzOiAtbCAnc3RyaW5ncy5UcmltU3VmZml4KHBhdGguQmFzZShmaWxlbmFtZSkscGF0aC5FeHQoZmlsZW5hbWUpKSc=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue import ./.github/workflows/ --with-context -p github -f -l workflows: -l &#39;strings.TrimSuffix(path.Base(filename),path.Ext(filename))&#39;</span></span></code></pre></div></div>
</div>
<p>Check that a CUE file has been created for each YAML workflow in the
<code>.github/workflows</code> directory. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="bHMgLmdpdGh1Yi93b3JrZmxvd3MvID4uLi80LmFjdHVhbC50eHQ=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Actual command in CUE-By-Example guide:
</span></span><span style="display:flex;"><span># ls .github/workflows/
</span></span><span style="display:flex;"><span>$ ls .github/workflows/ &gt;../4.actual.txt</span></span></code></pre></div></div>
</div>
<p>Your output should look similar to this, with matching pairs of YAML and CUE
files:</p>
<p><div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="4.expected.txt"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="4.expected.txt">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>4.expected.txt
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="4.expected.txt"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="d29ya2Zsb3cxLmN1ZQp3b3JrZmxvdzEueW1sCndvcmtmbG93Mi5jdWUKd29ya2Zsb3cyLnltbA==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>workflow1.cue
</span></span><span style="display:flex;"><span>workflow1.yml
</span></span><span style="display:flex;"><span>workflow2.cue
</span></span><span style="display:flex;"><span>workflow2.yml</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>

Observe that each workflow has been imported into the <code>workflows</code> struct, at a
location derived from its original file name:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="aGVhZCAtNSAuZ2l0aHViL3dvcmtmbG93cy8qLmN1ZSA&#43;Li4vNS5hY3R1YWwudHh0">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Actual command in CUE-By-Example guide:
</span></span><span style="display:flex;"><span># head -5 .github/workflows/*.cue
</span></span><span style="display:flex;"><span>$ head -5 .github/workflows/*.cue &gt;../5.actual.txt</span></span></code></pre></div></div>
</div>
<p>The output should reflect your workflows. In our example:</p>
<div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="5.expected.txt"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="5.expected.txt">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>5.expected.txt
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="5.expected.txt"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="PT0&#43;IC5naXRodWIvd29ya2Zsb3dzL3dvcmtmbG93MS5jdWUgPD09CnBhY2thZ2UgZ2l0aHViCgp3b3JrZmxvd3M6IHdvcmtmbG93MTogewoJb246IFsKCQkicHVzaCIsCgo9PT4gLmdpdGh1Yi93b3JrZmxvd3Mvd29ya2Zsb3cyLmN1ZSA8PT0KcGFja2FnZSBnaXRodWIKCndvcmtmbG93czogd29ya2Zsb3cyOiB7CglvbjogWwoJCSJwdXNoIiw=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>==&gt; .github/workflows/workflow1.cue &lt;==
</span></span><span style="display:flex;"><span>package github
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workflows: workflow1: {
</span></span><span style="display:flex;"><span>	on: [
</span></span><span style="display:flex;"><span>		&#34;push&#34;,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==&gt; .github/workflows/workflow2.cue &lt;==
</span></span><span style="display:flex;"><span>package github
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>workflows: workflow2: {
</span></span><span style="display:flex;"><span>	on: [
</span></span><span style="display:flex;"><span>		&#34;push&#34;,</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>

<h4 id="arrow_right-store-cue-workflows-in-a-dedicated-directory">
    <a href="#arrow_right-store-cue-workflows-in-a-dedicated-directory" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Store CUE workflows in a dedicated directory</h4>
<p>Create a directory called <code>github</code> to hold your CUE-based GitHub Actions
workflow files. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="bWtkaXIgLXAgaW50ZXJuYWwvY2kvZ2l0aHVi">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ mkdir -p internal/ci/github</span></span></code></pre></div></div>
</div>
<p>You may change the hierarchy and naming of <code>github</code>&rsquo;s <strong>parent</strong> directories to
suit your repository layout. If you do so, you will need to adapt some commands
and CUE code as you follow this guide.</p>
<p>Move the newly-created CUE files into their dedicated directory. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="bXYgLi8uZ2l0aHViL3dvcmtmbG93cy8qLmN1ZSBpbnRlcm5hbC9jaS9naXRodWI=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ mv ./.github/workflows/*.cue internal/ci/github</span></span></code></pre></div></div>
</div>
<h3 id="validate-workflows">
    <a href="#validate-workflows" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Validate workflows</h3>
<h4 id="arrow_right-authenticate-the-cue-command-against-the-cue-central-registry">
    <a href="#arrow_right-authenticate-the-cue-command-against-the-cue-central-registry" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Authenticate the <code>cue</code> command against the CUE Central Registry</h4>
<p>Run this command, and follow the instructions it displays:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIGxvZ2lu">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue login</span></span></code></pre></div></div>
</div>
<p>This will allow you to fetch modules from the Central Registry.</p>
<h4 id="arrow_right-add-a-dependency-on-a-github-actions-module">
    <a href="#arrow_right-add-a-dependency-on-a-github-actions-module" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Add a dependency on a GitHub Actions module</h4>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIG1vZCBnZXQgZ2l0aHViLmNvbS9jdWUtdG1wL2pzb25zY2hlbWEtcHViL2V4cDEvZ2l0aHViYWN0aW9uc0B2MC4zLjA=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue mod get github.com/cue-tmp/jsonschema-pub/exp1/githubactions@v0.3.0</span></span></code></pre></div></div>
</div>
<p>This command specifies a precise version of the GitHub Actions module in order
to make sure that this process is reproducible.</p>
<p>The GitHub Actions module <em>looks</em> like it has a temporary location because it
was created as part of the CUE project&rsquo;s work to figure out how and where to
store third-party schemas. Whilst it will eventually live at a more permanent
and appropriate location (which will then be reflected in this guide), this
<em>version</em> of the module won&rsquo;t disappear from its &ldquo;temporary&rdquo; location - so it&rsquo;s
safe to use!</p>
<h4 id="arrow_right-apply-the-schema">
    <a href="#arrow_right-apply-the-schema" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Apply the schema</h4>
<p>We need to tell CUE to apply the schema to each workflow.</p>
<p>To do this we&rsquo;ll create a file at <code>internal/ci/github/workflows.cue</code> in our
example.</p>
<p>However, if the workflow imports that you performed earlier <em>already</em> created a
file with that same path and name, then simply select a different CUE filename
that <em>doesn&rsquo;t</em> already exist. Place the file in the <code>internal/ci/github/</code>
directory.</p>
<p>:floppy_disk: <code>internal/ci/github/workflows.cue</code>
<div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="github-actions-example/internal/ci/github/workflows.cue"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="github-actions-example/internal/ci/github/workflows.cue">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>github-actions-example/internal/ci/github/workflows.cue
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="github-actions-example/internal/ci/github/workflows.cue"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="cGFja2FnZSBnaXRodWIKCmltcG9ydCAiZ2l0aHViLmNvbS9jdWUtdG1wL2pzb25zY2hlbWEtcHViL2V4cDEvZ2l0aHViYWN0aW9ucyIKCi8vIEVhY2ggbWVtYmVyIG9mIHRoZSB3b3JrZmxvd3Mgc3RydWN0IG11c3QgYmUgYSB2YWxpZCAjV29ya2Zsb3cuCndvcmtmbG93czogW19dOiBnaXRodWJhY3Rpb25zLiNXb3JrZmxvdw==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cue" data-lang="cue"><span style="display:flex;"><span><span style="font-weight:bold">package</span> github
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> <span style="color:#b84">&#34;github.com/cue-tmp/jsonschema-pub/exp1/githubactions&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Each member of the workflows struct must be a valid #Workflow.</span>
</span></span><span style="display:flex;"><span>workflows<span style="font-weight:bold">:</span> <span style="font-weight:bold">[</span><span style="font-weight:bold">_</span><span style="font-weight:bold">]:</span> githubactions.#Workflow</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>
</p>
<h4 id="arrow_right-validate-your-workflows">
    <a href="#arrow_right-validate-your-workflows" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Validate your workflows</h4>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIHZldCAtYyAuL2ludGVybmFsL2NpL2dpdGh1Yg==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue vet -c ./internal/ci/github</span></span></code></pre></div></div>
</div>
<p>If this command fails and produces any output, then CUE believes that at least
one of your workflows isn&rsquo;t valid. It&rsquo;s very likely that CUE is correct (and
has found a problem) even if GitHub Actions manages to process your workflow
files successfully &ndash; because GitHub Actions can be lax and overly permissive
in enforcing its own schema rules!  You&rsquo;ll need to resolve this before
continuing, by updating your workflows inside your new CUE files. If you&rsquo;re
having difficulty fixing them, please come and ask for help in the friendly CUE
<a href="https://cuelang.org/s/slack">Slack workspace</a> or
<a href="https://cuelang.org/s/discord">Discord server</a>!</p>
<h3 id="generate-yaml-from-cue">
    <a href="#generate-yaml-from-cue" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Generate YAML from CUE</h3>
<h4 id="arrow_right-create-a-cue-workflow-command">
    <a href="#arrow_right-create-a-cue-workflow-command" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Create a CUE workflow command</h4>
<p>Create a CUE file at <code>internal/ci/github/ci_tool.cue</code>, containing the following workflow command.
Adapt the element commented with <code>TODO</code>:</p>
<p>:floppy_disk: <code>internal/ci/github/ci_tool.cue</code>
<div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="github-actions-example/internal/ci/github/ci_tool.cue"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="github-actions-example/internal/ci/github/ci_tool.cue">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>github-actions-example/internal/ci/github/ci_tool.cue
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="github-actions-example/internal/ci/github/ci_tool.cue"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="cGFja2FnZSBnaXRodWIKCmltcG9ydCAoCgkicGF0aCIKCSJlbmNvZGluZy95YW1sIgoJInRvb2wvZmlsZSIKKQoKX2dvb3M6IHN0cmluZyBAdGFnKG9zLHZhcj1vcykKCi8vIFJlZ2VuZXJhdGUgYWxsIHdvcmtmbG93IGZpbGVzCmNvbW1hbmQ6IHJlZ2VuZXJhdGU6IHsKCXdvcmtmbG93X2ZpbGVzOiB7CgkJLy8gVE9ETzogdXBkYXRlIF90b29sRmlsZSB0byByZWZsZWN0IHRoZSBkaXJlY3RvcnkgaGllcmFyY2h5IGNvbnRhaW5pbmcgdGhpcyBmaWxlLgoJCWxldCBfdG9vbEZpbGUgPSAiaW50ZXJuYWwvY2kvZ2l0aHViL2NpX3Rvb2wuY3VlIgoJCWxldCBfd29ya2Zsb3dEaXIgPSBwYXRoLkZyb21TbGFzaCgiLmdpdGh1Yi93b3JrZmxvd3MiLCBwYXRoLlVuaXgpCgkJbGV0IF9kb25vdGVkaXQgPSAiQ29kZSBnZW5lcmF0ZWQgYnkgXChfdG9vbEZpbGUpOyBETyBOT1QgRURJVC4iCgoJCWNsZWFuOiB7CgkJCWdsb2I6IGZpbGUuR2xvYiAmIHsKCQkJCWdsb2I6IHBhdGguSm9pbihbX3dvcmtmbG93RGlyLCAiKi55bWwiXSwgX2dvb3MpCgkJCQlmaWxlczogWy4uLnN0cmluZ10KCQkJfQoJCQlmb3IgXywgX2ZpbGVuYW1lIGluIGdsb2IuZmlsZXMgewoJCQkJIkRlbGV0ZSBcKF9maWxlbmFtZSkiOiBmaWxlLlJlbW92ZUFsbCAmIHtwYXRoOiBfZmlsZW5hbWV9CgkJCX0KCQl9CgoJCWNyZWF0ZTogewoJCQlmb3IgX3dvcmtmbG93TmFtZSwgX3dvcmtmbG93IGluIHdvcmtmbG93cwoJCQlsZXQgX2ZpbGVuYW1lID0gX3dvcmtmbG93TmFtZSArICIueW1sIiB7CgkJCQkiR2VuZXJhdGUgXChfZmlsZW5hbWUpIjogZmlsZS5DcmVhdGUgJiB7CgkJCQkJJGFmdGVyOiBbZm9yIHYgaW4gY2xlYW4ge3Z9XQoJCQkJCWZpbGVuYW1lOiBwYXRoLkpvaW4oW193b3JrZmxvd0RpciwgX2ZpbGVuYW1lXSwgX2dvb3MpCgkJCQkJY29udGVudHM6ICIjIFwoX2Rvbm90ZWRpdClcblxuXCh5YW1sLk1hcnNoYWwoX3dvcmtmbG93KSkiCgkJCQl9CgkJCX0KCQl9Cgl9Cn0=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cue" data-lang="cue"><span style="display:flex;"><span><span style="font-weight:bold">package</span> github
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#b84">&#34;path&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#b84">&#34;encoding/yaml&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#b84">&#34;tool/file&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>_goos<span style="font-weight:bold">:</span> <span style="color:#458;font-weight:bold">string</span> @tag(os<span style="font-weight:bold">,</span>var<span style="font-weight:bold">=</span>os)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Regenerate all workflow files</span>
</span></span><span style="display:flex;"><span>command<span style="font-weight:bold">:</span> regenerate<span style="font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>	workflow_files<span style="font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// TODO: update _toolFile to reflect the directory hierarchy containing this file.</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">let</span> _toolFile <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;internal/ci/github/ci_tool.cue&#34;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">let</span> _workflowDir <span style="font-weight:bold">=</span> path.FromSlash(<span style="color:#b84">&#34;.github/workflows&#34;</span><span style="font-weight:bold">,</span> path.Unix)
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">let</span> _donotedit <span style="font-weight:bold">=</span> <span style="color:#b84">&#34;Code generated by </span><span style="color:#b84">\(</span>_toolFile<span style="color:#b84">)</span><span style="color:#b84">; DO NOT EDIT.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		clean<span style="font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>			glob<span style="font-weight:bold">:</span> file.Glob <span style="font-weight:bold">&amp;</span> {
</span></span><span style="display:flex;"><span>				glob<span style="font-weight:bold">:</span> path.Join(<span style="font-weight:bold">[</span>_workflowDir<span style="font-weight:bold">,</span> <span style="color:#b84">&#34;*.yml&#34;</span><span style="font-weight:bold">],</span> _goos)
</span></span><span style="display:flex;"><span>				files<span style="font-weight:bold">:</span> <span style="font-weight:bold">[...</span><span style="color:#458;font-weight:bold">string</span><span style="font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">for</span> <span style="font-weight:bold">_</span><span style="font-weight:bold">,</span> _filename <span style="font-weight:bold">in</span> glob.files {
</span></span><span style="display:flex;"><span>				<span style="color:#b84">&#34;Delete </span><span style="color:#b84">\(</span>_filename<span style="color:#b84">)</span><span style="color:#b84">&#34;</span><span style="font-weight:bold">:</span> file.RemoveAll <span style="font-weight:bold">&amp;</span> {path<span style="font-weight:bold">:</span> _filename}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		create<span style="font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">for</span> _workflowName<span style="font-weight:bold">,</span> _workflow <span style="font-weight:bold">in</span> workflows
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">let</span> _filename <span style="font-weight:bold">=</span> _workflowName <span style="font-weight:bold">+</span> <span style="color:#b84">&#34;.yml&#34;</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#b84">&#34;Generate </span><span style="color:#b84">\(</span>_filename<span style="color:#b84">)</span><span style="color:#b84">&#34;</span><span style="font-weight:bold">:</span> file.Create <span style="font-weight:bold">&amp;</span> {
</span></span><span style="display:flex;"><span>					$after<span style="font-weight:bold">:</span> <span style="font-weight:bold">[</span><span style="font-weight:bold">for</span> v <span style="font-weight:bold">in</span> clean {v}<span style="font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>					filename<span style="font-weight:bold">:</span> path.Join(<span style="font-weight:bold">[</span>_workflowDir<span style="font-weight:bold">,</span> _filename<span style="font-weight:bold">],</span> _goos)
</span></span><span style="display:flex;"><span>					contents<span style="font-weight:bold">:</span> <span style="color:#b84">&#34;# </span><span style="color:#b84">\(</span>_donotedit<span style="color:#b84">)</span><span style="color:#b84">\n\n</span><span style="color:#b84">\(</span>yaml.Marshal(_workflow<span style="color:#b84">)</span><span style="color:#b84">)&#34;</span>
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>
</p>
<p>Make the modification indicated by the <code>TODO</code> comment.</p>
<p>This workflow command will export each CUE-based workflow back into its required YAML file,
on demand.</p>
<h4 id="arrow_right-test-the-cue-workflow-command">
    <a href="#arrow_right-test-the-cue-workflow-command" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Test the CUE workflow command</h4>
<p>With the modified <code>ci_tool.cue</code> file in place, check that the <code>regenerate</code>
workflow command is available <strong>from a shell sitting at the root of the
repository</strong>. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y2QgJChnaXQgcmV2LXBhcnNlIC0tc2hvdy10b3BsZXZlbCkgIyBtYWtlIHN1cmUgd2UncmUgc2l0dGluZyBhdCB0aGUgcmVwb3NpdG9yeSByb290CmN1ZSBoZWxwIGNtZCByZWdlbmVyYXRlIC4vaW50ZXJuYWwvY2kvZ2l0aHViIHwgaGVhZCAtNCA&#43;Li4vMTIuYWN0dWFsLnR4dA==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cd $(git rev-parse --show-toplevel) # make sure we&#39;re sitting at the repository root
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Actual command in CUE-By-Example guide:
</span></span><span style="display:flex;"><span># cue help cmd regenerate ./internal/ci/github   # the &#34;./&#34; prefix is required
</span></span><span style="display:flex;"><span>$ cue help cmd regenerate ./internal/ci/github | head -4 &gt;../12.actual.txt</span></span></code></pre></div></div>
</div>
<p>Your output <strong>must</strong> begin with the following:</p>
<div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="12.expected.txt"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="12.expected.txt">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>12.expected.txt
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="12.expected.txt"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="UmVnZW5lcmF0ZSBhbGwgd29ya2Zsb3cgZmlsZXMKClVzYWdlOgogIGN1ZSBjbWQgcmVnZW5lcmF0ZSBbZmxhZ3Nd">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Regenerate all workflow files
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>  cue cmd regenerate [flags]</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>

<table>
<thead>
<tr>
<th style="text-align:left">:exclamation: WARNING :exclamation:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">If you <em>don&rsquo;t</em> see the usage explanation for the <code>regenerate</code> workflow command (or if you receive an error message) then <strong>either</strong> your workflow command isn&rsquo;t set up as CUE requires, <strong>or</strong> you&rsquo;re running a CUE version older than <code>v0.11.0-alpha.2</code>. If you&rsquo;ve <a href="https://cuelang.org/dl">upgraded to at least that version</a> but the usage explanation still isn&rsquo;t being displayed then: (1) double check the contents of the <code>ci_tool.cue</code> file and the modifications you made to it; (2) make sure its location in the repository is precisely as given in this guide; (3) ensure the filename is <em>exactly</em> <code>ci_tool.cue</code>; (4) check that the <code>internal/ci/github/workflows.cue</code> file has the same contents as shown above; (5) run <code>cue vet ./internal/ci/github</code> and check that your workflows actually validate successfully - in other words: were they truly valid before you even started this process? Lastly, make sure you&rsquo;ve followed all the steps in this guide, and that you invoked the <code>cue help</code> command from the repository&rsquo;s root directory. If you get really stuck, please come and join <a href="https://cuelang.org/community/">the CUE community</a> and ask for some help!</td>
</tr>
</tbody>
</table>
<h4 id="arrow_right-regenerate-the-yaml-workflow-files">
    <a href="#arrow_right-regenerate-the-yaml-workflow-files" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Regenerate the YAML workflow files</h4>
<p>Run the <code>regenerate</code> workflow command to produce YAML workflow files from CUE. For
example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIGNtZCByZWdlbmVyYXRlIC4vaW50ZXJuYWwvY2kvZ2l0aHViICMgdGhlICIuLyIgcHJlZml4IGlzIHJlcXVpcmVk">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue cmd regenerate ./internal/ci/github # the &#34;./&#34; prefix is required</span></span></code></pre></div></div>
</div>
<h4 id="arrow_right-audit-changes-to-the-yaml-workflow-files">
    <a href="#arrow_right-audit-changes-to-the-yaml-workflow-files" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Audit changes to the YAML workflow files</h4>
<p>Check that each YAML workflow file has a single change from the original:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Z2l0IGRpZmYgLmdpdGh1Yi93b3JrZmxvd3MvIHwgZ3JlcCAtdiAnXmluZGV4IFswLTlhLWZdezd9XC5cLlswLTlhLWZdezd9JyA&#43;Li4vMTQuYWN0dWFsLnR4dA==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Actual command in CUE-By-Example guide:
</span></span><span style="display:flex;"><span># git diff .github/workflows/
</span></span><span style="display:flex;"><span>$ git diff .github/workflows/ | grep -v &#39;^index [0-9a-f]{7}\.\.[0-9a-f]{7}&#39; &gt;../14.actual.txt</span></span></code></pre></div></div>
</div>
<p>Your output should look similar to the following example:</p>
<div class="code-tabs"><div class="code-tabs__item code-tabs__item--top-left">




<div class="tabs tabs--code" data-tabs data-group="default">
<div class="tabs__nav tabs-nav tabs-nav--code" data-tabs-nav><div class="tabs-nav__item">
            <div
                data-tab-item="14.expected.txt"
                data-tab-group="default"
                class="tabs-nav__tab"data-copy><button title="Copy filename" class="tabs-nav__copy" data-copy-button data-copy-type="text" data-copy-value="14.expected.txt">



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--file"></use>
</svg>
<span class="tabs-nav__message is-hidden" data-copy-message aria-hidden="true">
                            Copied!
                        </span>
                    </button>14.expected.txt
            </div>
        </div></div>

<div class="tabs__content"><div data-tab-item="14.expected.txt"
            data-tab-group="default"
            class="tabs__item is-active"
        ><div class="code-block code-block--tab"data-copy><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="ZGlmZiAtLWdpdCBhLy5naXRodWIvd29ya2Zsb3dzL3dvcmtmbG93MS55bWwgYi8uZ2l0aHViL3dvcmtmbG93cy93b3JrZmxvdzEueW1sCi0tLSBhLy5naXRodWIvd29ya2Zsb3dzL3dvcmtmbG93MS55bWwKKysrIGIvLmdpdGh1Yi93b3JrZmxvd3Mvd29ya2Zsb3cxLnltbApAQCAtMSwzICsxLDUgQEAKKyMgQ29kZSBnZW5lcmF0ZWQgYnkgaW50ZXJuYWwvY2kvZ2l0aHViL2NpX3Rvb2wuY3VlOyBETyBOT1QgRURJVC4KKwogIm9uIjoKICAgLSBwdXNoCiAgIC0gcHVsbF9yZXF1ZXN0CmRpZmYgLS1naXQgYS8uZ2l0aHViL3dvcmtmbG93cy93b3JrZmxvdzIueW1sIGIvLmdpdGh1Yi93b3JrZmxvd3Mvd29ya2Zsb3cyLnltbAotLS0gYS8uZ2l0aHViL3dvcmtmbG93cy93b3JrZmxvdzIueW1sCisrKyBiLy5naXRodWIvd29ya2Zsb3dzL3dvcmtmbG93Mi55bWwKQEAgLTEsMyArMSw1IEBACisjIENvZGUgZ2VuZXJhdGVkIGJ5IGludGVybmFsL2NpL2dpdGh1Yi9jaV90b29sLmN1ZTsgRE8gTk9UIEVESVQuCisKICJvbiI6CiAgIC0gcHVzaAogICAtIHB1bGxfcmVxdWVzdA==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>diff --git a/.github/workflows/workflow1.yml b/.github/workflows/workflow1.yml
</span></span><span style="display:flex;"><span>--- a/.github/workflows/workflow1.yml
</span></span><span style="display:flex;"><span>+++ b/.github/workflows/workflow1.yml
</span></span><span style="display:flex;"><span>@@ -1,3 +1,5 @@
</span></span><span style="display:flex;"><span>+# Code generated by internal/ci/github/ci_tool.cue; DO NOT EDIT.
</span></span><span style="display:flex;"><span>+
</span></span><span style="display:flex;"><span> &#34;on&#34;:
</span></span><span style="display:flex;"><span>   - push
</span></span><span style="display:flex;"><span>   - pull_request
</span></span><span style="display:flex;"><span>diff --git a/.github/workflows/workflow2.yml b/.github/workflows/workflow2.yml
</span></span><span style="display:flex;"><span>--- a/.github/workflows/workflow2.yml
</span></span><span style="display:flex;"><span>+++ b/.github/workflows/workflow2.yml
</span></span><span style="display:flex;"><span>@@ -1,3 +1,5 @@
</span></span><span style="display:flex;"><span>+# Code generated by internal/ci/github/ci_tool.cue; DO NOT EDIT.
</span></span><span style="display:flex;"><span>+
</span></span><span style="display:flex;"><span> &#34;on&#34;:
</span></span><span style="display:flex;"><span>   - push
</span></span><span style="display:flex;"><span>   - pull_request</span></span></code></pre></div></div>
</div>
</div></div>
</div>

</div></div>

<p>The only change in each YAML file is the addition of a header that warns the
reader not to edit the file directly.</p>
<h4 id="arrow_right-add-and-commit-files-to-git">
    <a href="#arrow_right-add-and-commit-files-to-git" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>:arrow_right: Add and commit files to git</h4>
<p>Add your files to git. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Z2l0IGFkZCAuZ2l0aHViL3dvcmtmbG93cy8gaW50ZXJuYWwvY2kvZ2l0aHViLyBjdWUubW9kL21vZHVsZS5jdWU=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ git add .github/workflows/ internal/ci/github/ cue.mod/module.cue</span></span></code></pre></div></div>
</div>
<p>Make sure to include your slightly modified YAML workflow files in
<code>.github/workflows/</code> along with all the new files in <code>internal/ci/github/</code> and
your <code>cue.mod/module.cue</code> file.</p>
<p>Commit your files to git, with an appropriate commit message:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Z2l0IGNvbW1pdCAtLXF1aWV0IC1tICJjaTogY3JlYXRlIENVRSBzb3VyY2VzIGZvciBHSEEgd29ya2Zsb3dzIg==">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Actual command in CUE-By-Example guide:
</span></span><span style="display:flex;"><span># git commit -m &#34;ci: create CUE sources for GHA workflows&#34;
</span></span><span style="display:flex;"><span>$ git commit --quiet -m &#34;ci: create CUE sources for GHA workflows&#34;</span></span></code></pre></div></div>
</div>
<h2 id="conclusion">
    <a href="#conclusion" class="anchor" aria-label="Anchor">



<svg class="icon anchor__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>
</a>Conclusion</h2>
<p><strong>Well done - your GitHub Actions workflow files have been imported into CUE!</strong></p>
<p>They can now be managed using CUE, leading to safer and more predictable
changes. The use of a schema to check your workflows means that you will catch
and fix many types of mistake earlier than before, without waiting for the slow
&ldquo;git add/commit/push; check if CI fails&rdquo; cycle.</p>
<p>From now on, each time you make a change to a CUE workflow file, immediately
regenerate the YAML files required by GitHub Actions, and commit your changes
to all the CUE and YAML files. For example:</p>
<p>:computer: <code>terminal</code></p>
<div class="code-block code-block--heading code-block--terminal"data-copy><div class="code-block__heading">
            <span class="code-block__tab">TERMINAL</span>
        </div><div class="code-block__highlight"><button class="code-block__copy" type="button" data-copy-button data-copy-type="code" data-copy-value="Y3VlIGNtZCByZWdlbmVyYXRlIC4vaW50ZXJuYWwvY2kvZ2l0aHViLyAjIHRoZSAiLi8iIHByZWZpeCBpcyByZXF1aXJlZApnaXQgYWRkIC5naXRodWIvd29ya2Zsb3dzLyBpbnRlcm5hbC9jaS9naXRodWIvCmdpdCBjb21taXQgLW0gImNpOiBhZGRlZCBuZXcgcmVsZWFzZSB3b3JrZmxvdyIgIyBleGFtcGxlIG1lc3NhZ2U=">
                <span>Copy code</span>
                <span class="code-block__message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cue cmd regenerate ./internal/ci/github/ # the &#34;./&#34; prefix is required
</span></span><span style="display:flex;"><span>$ git add .github/workflows/ internal/ci/github/
</span></span><span style="display:flex;"><span>$ git commit -m &#34;ci: added new release workflow&#34; # example message</span></span></code></pre></div></div>
</div>

                        
                    </div><footer class="article__footer">
    <div class="article__lastmod">
        <p class="lastmod">
         <a class="lastmod__link" href="https://github.com/cue-lang/cuelang.org/commit/7c104835c2bd9731b5a6b8cd703b905b2a4896aa">
                Last modified April 8, 2025</a>
    </p>

    </div>

    <div class="article__footer-meta"><div class="article__share"><details class="share" data-dropdown>
    <summary class="button button--icon button--light-blue share__button">
        



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--share"></use>
</svg>

        <span>Open share options</span>
    </summary>

    <ul class="share__list">
        <li class="share__item" data-copy>
            <button class="share__copy" data-copy-button data-copy-type="url" data-copy-value="/docs/draft/cbe-001_github_actions_importing_workflows/">
                



<svg class="icon share__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--link"></use>
</svg>

                <span class="share__link-text">Copy link</span>
                <span class="share__copy-message is-hidden" data-copy-message aria-hidden="true">
                    Copied!
                </span>
            </button>
        </li>

        <li class="share__item">
            <a class="share__link" target="_blank" href="https://twitter.com/intent/tweet?url=/docs/draft/cbe-001_github_actions_importing_workflows/&text=Source:%20https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows%20Driving%20GitHub%20Actions%20workflows%20with%20CUE%20by%20Jonathan%20Matthews%0aThis%20guide%20explains%20how%20to%20convert%20GitHub%20Actions%20workflow%20files%20from%20YAML%20to%20CUE,%20check%20those%20workflows%20are%20valid,%20and%20then%20use%20CUE&amp;rsquo;s%20tooling%20layer%20to%20regenerate%20YAML.%0aThis%20allows%20you%20to%20switch%20to%20CUE%20as%20a%20source%20of%20truth%20for%20GitHub%20Actions%20workflows%20and%20perform%20client-side%20validation,%20without%20GitHub%20needing%20to%20know%20you&amp;rsquo;re%20managing%20your%20workflows%20with%20CUE.">
                



<svg class="icon share__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-x"></use>
</svg>

                <p><span class="share__link-text">Share on X (Twitter)</span></p>
            </a>
        </li>

        <li class="share__item">
            <a class="share__link" target="_blank"
            href="https://www.linkedin.com/shareArticle?mini=true&url=/docs/draft/cbe-001_github_actions_importing_workflows/&summary=Source:%20https://github.com/cue-labs/cue-by-example/tree/main/001_github_actions_importing_workflows%20Driving%20GitHub%20Actions%20workflows%20with%20CUE%20by%20Jonathan%20Matthews%0aThis%20guide%20explains%20how%20to%20convert%20GitHub%20Actions%20workflow%20files%20from%20YAML%20to%20CUE,%20check%20those%20workflows%20are%20valid,%20and%20then%20use%20CUE&amp;rsquo;s%20tooling%20layer%20to%20regenerate%20YAML.%0aThis%20allows%20you%20to%20switch%20to%20CUE%20as%20a%20source%20of%20truth%20for%20GitHub%20Actions%20workflows%20and%20perform%20client-side%20validation,%20without%20GitHub%20needing%20to%20know%20you&amp;rsquo;re%20managing%20your%20workflows%20with%20CUE.">
                



<svg class="icon share__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-linkedin"></use>
</svg>

                <p><span class="share__link-text">Share on Linkedin</span></p>
            </a>
        </li>
    </ul>
</details>
</div>
    </div>
</footer>
</div>
            </article>

            



<div class="prevnext">
    <nav class="prevnext__container" aria-label="Previous/Next navigation"><a class="prevnext__prev" href="/docs/draft/cbe-006_buildkite_importing_pipelines/" aria-label="Previous - CUE By Example - Driving Buildkite Pipelines with CUE">
                



<svg class="icon prevnext__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--circle-arrow-left"></use>
</svg>

                <span class="prevnext__text">CUE By Example - Driving Buildkite Pipelines with CUE</span>
            </a><a class="prevnext__next" href="/docs/draft/cbe-005_gitlab_ci/" aria-label="Next - CUE By Example - Driving GitLab CI/CD pipelines with CUE">
                <span class="prevnext__text">CUE By Example - Driving GitLab CI/CD pipelines with CUE</span>
                



<svg class="icon prevnext__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--circle-arrow-right"></use>
</svg>

            </a></nav>
</div>

        </div>
        <div id="docs-menu" class="docs__aside">
            <div class="docs__backdrop" data-docs-close="docs"></div>
            <div class="docs__nav">
                <nav class="tree">
    <ul class="tree__list is-book">
        
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/introduction/" title="Introduction">
            <span class="tree__text">Introduction</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/tour/" title="Tour">
            <span class="tree__text">Tour</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/integration/" title="Integrations">
            <span class="tree__text">Integrations</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/tutorial/" title="Tutorials">
            <span class="tree__text">Tutorials</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/howto/" title="How-to Guides">
            <span class="tree__text">How-to Guides</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/concept/" title="Concept Guides">
            <span class="tree__text">Concept Guides</span>
        </a>
    </li>
    
    
    

    <li class="tree__item">
        <a class="tree__link" href="/docs/reference/" title="References">
            <span class="tree__text">References</span>
        </a>
    </li>
    </ul>
</nav>



                <button type="button" class="docs__hide button button--icon button--raised button--light-blue"
                        aria-haspopup="menu" aria-expanded="false" aria-controls="docs-menu" data-docs-toggle>



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--chevron-left"></use>
</svg>
<span>Hide side navigation</span>
                </button>
            </div>
        </div>

        <button type="button" class="docs__show button button--icon button--raised button--light-blue"
                aria-haspopup="menu" aria-expanded="false" aria-controls="docs-menu" data-docs-toggle>



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--chevron-right"></use>
</svg>
<span>Show side navigation</span>
        </button>
    </div>

            </main>

            <footer id="site-footer" class="site__footer">
                




<div class="footer">
    <div class="footer__sitemap">
        <nav class="footer__container" aria-label="Footer menu">
            
                
                <div class="nav nav--footer">
                    <p class="nav__title">Get Started</p>

                    <ul class="nav__list">
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/docs/">
                                    <span class="nav__text">Documentation</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/docs/tour/">
                                    <span class="nav__text">Language Tour</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/play/">
                                    <span class="nav__text">Playground</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/docs/introduction/installation/">
                                    <span class="nav__text">Install CUE</span>
                                </a>
                            </li>
                        
                    </ul>
                </div>
            
                
                <div class="nav nav--footer">
                    <p class="nav__title">Community</p>

                    <ul class="nav__list">
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/community">
                                    <span class="nav__text">The CUE Community</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="https://github.com/cue-lang/cue/blob/master/CONTRIBUTING.md#contribution-guide" target="_blank">
                                    <span class="nav__text">Contributing</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/docs/reference/code-of-conduct/">
                                    <span class="nav__text">Code of Conduct</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/s/slack">
                                    <span class="nav__text">Slack Workspace</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="/s/discord">
                                    <span class="nav__text">Discord Server</span>
                                </a>
                            </li>
                        
                    </ul>
                </div>
            
                
                <div class="nav nav--footer">
                    <p class="nav__title">Connect</p>

                    <ul class="nav__list">
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="https://github.com/cue-lang/cue" target="_blank">
                                    <span class="nav__text">GitHub</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="https://twitter.com/cue_lang" target="_blank">
                                    <span class="nav__text">X (Twitter)</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="https://bsky.app/profile/cuelang.org" target="_blank">
                                    <span class="nav__text">Bluesky</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav__item">
                                <a class="nav__link"
                                   href="https://www.youtube.com/@cuelang/videos" target="_blank">
                                    <span class="nav__text">YouTube</span>
                                </a>
                            </li>
                        
                    </ul>
                </div>
            
        </nav>
    </div>

    <div class="footer__legal">
        <nav class="footer__container" aria-label="Legal">
            <div class="nav nav--legal">
                <ul class="nav__list">
                    <li class="nav__item">
                        <span class="nav__text">&copy; 2025 CUE</span>
                    </li>

                    
                        <li class="nav__item"><a class="nav__link"
                               href="/privacy-policy/">
                                <span class="nav__text">Privacy policy</span>
                            </a>
                        </li>
                    

                    <li class="nav__item">
                        <a class="nav__link" href="https://github.com/cue-lang/cue/issues/new?labels=Triage,NeedsInvestigation,cuelang.org&amp;title=cuelang.org:%20&amp;template=bug_report.md&amp;body=%23%23%23&#43;What&#43;page&#43;were&#43;you&#43;looking&#43;at%3F%0A%0A%2Fdocs%2Fdraft%2Fcbe-001_github_actions_importing_workflows%2F%0A%0A%23%23%23&#43;What&#43;version&#43;of&#43;the&#43;site&#43;were&#43;you&#43;looking&#43;at%3F%0A%0Ahttps%3A%2F%2Fgithub.com%2Fcue-lang%2Fcuelang.org%2Fcommit%2Fc5f2bfdbc3a14b43accb6ad18ec35ea5e15d2949%0A%0A%23%23%23&#43;What&#43;did&#43;you&#43;do%3F%0A%0A%0A%0A%23%23%23&#43;What&#43;did&#43;you&#43;expect%3F%0A%0A%0A%0A%23%23%23&#43;What&#43;did&#43;you&#43;see&#43;instead%3F%0A%0A" target="_blank">
                            <span class="nav__text">Report an Issue</span>
                        </a>
                    </li>
                </ul>
            </div>

            <a href="/" class="footer__branding" rel="home">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path class="logo__letters" d="M39.555 50.355c-6.853.0-11.907 5.133-11.907 13.602s5.027 13.602 11.907 13.602c5.818.0 10.073-3.648 10.94-8.883l-4.034-.012c-.686 3.389-3.532 5.252-6.88 5.252-4.541.0-7.968-3.533-7.968-9.957s3.414-9.955 7.979-9.955c3.373.0 6.207 1.902 6.865 5.328l.004-.002h4.033c-.906-5.664-5.34-8.975-10.94-8.975zm38.748.362-.002.004h.002zm0 .004v26.478H96.07v-3.44H82.297v-8.105h12.752V62.23H82.297V54.16h13.617v-3.44zm-24.823.0v17.521c0 5.974 4.651 9.4 10.51 9.4 5.86.0 10.528-3.426 10.528-9.4V50.721h-3.995v17.457c0 3.711-2.985 5.793-6.529 5.793s-6.517-2.082-6.517-5.793V50.72z"/><path class="logo__inner" d="M64 9.586C33.947 9.586 9.586 33.947 9.586 64S33.947 118.414 64 118.414 118.414 94.053 118.414 64 94.05 9.586 64 9.586zm0 105.973c-28.476.0-51.562-23.086-51.562-51.562S35.524 12.438 64 12.438 115.562 35.524 115.562 64 92.476 115.562 64 115.562z"/><path class="logo__outer" d="M64 0C28.653.0.0 28.653.0 64s28.653 64 64 64 64-28.653 64-64S99.347.0 64 0zm0 121.843C32.054 121.843 6.157 95.946 6.157 64S32.054 6.157 64 6.157 121.843 32.054 121.843 64 95.946 121.843 64 121.843z"/></svg>
                <span>Homepage of CUE</span>
            </a>
        </nav>
    </div>
</div>

            </footer>
        </div>

        
                <div class="notification-bar is-hidden" data-notification-bar="cue-minor-release-v0.13">
        <div class="notification-bar__container">
            <div class="notification-bar__content">
                <strong>CUE v0.13 is now available</strong> &ndash; learn more about its <a href="https://github.com/cue-lang/cue/releases/tag/v0.13.0">new features and improvements</a>
            </div>
            <a class="button button--outline notification-bar__cta" href="/docs/introduction/installation/">
                    <span class="button__text">Install CUE</span>
                    



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--download"></use>
</svg>

                </a>
            <button type="button" class="button button--icon button--small notification-bar__close">
                



<svg class="icon button__icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--close"></use>
</svg>

                <span class="button__text">Close</span>
            </button>
        </div>
    </div>

        
        

<div id="mobile-menu" class="drawer drawer--mobile" data-drawer="menu">
    <div class="drawer__backdrop" data-drawer-close="menu"></div>
    <div class="drawer__container" tabindex="0">
        <div class="drawer__header">
            <a href="/" class="drawer__branding" rel="home">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path class="logo__letters" d="M39.555 50.355c-6.853.0-11.907 5.133-11.907 13.602s5.027 13.602 11.907 13.602c5.818.0 10.073-3.648 10.94-8.883l-4.034-.012c-.686 3.389-3.532 5.252-6.88 5.252-4.541.0-7.968-3.533-7.968-9.957s3.414-9.955 7.979-9.955c3.373.0 6.207 1.902 6.865 5.328l.004-.002h4.033c-.906-5.664-5.34-8.975-10.94-8.975zm38.748.362-.002.004h.002zm0 .004v26.478H96.07v-3.44H82.297v-8.105h12.752V62.23H82.297V54.16h13.617v-3.44zm-24.823.0v17.521c0 5.974 4.651 9.4 10.51 9.4 5.86.0 10.528-3.426 10.528-9.4V50.721h-3.995v17.457c0 3.711-2.985 5.793-6.529 5.793s-6.517-2.082-6.517-5.793V50.72z"/><path class="logo__inner" d="M64 9.586C33.947 9.586 9.586 33.947 9.586 64S33.947 118.414 64 118.414 118.414 94.053 118.414 64 94.05 9.586 64 9.586zm0 105.973c-28.476.0-51.562-23.086-51.562-51.562S35.524 12.438 64 12.438 115.562 35.524 115.562 64 92.476 115.562 64 115.562z"/><path class="logo__outer" d="M64 0C28.653.0.0 28.653.0 64s28.653 64 64 64 64-28.653 64-64S99.347.0 64 0zm0 121.843C32.054 121.843 6.157 95.946 6.157 64S32.054 6.157 64 6.157 121.843 32.054 121.843 64 95.946 121.843 64 121.843z"/></svg>
                <span>Homepage of CUE</span>
            </a>

            <div class="drawer__close">
                <button type="button" class="button button--white button--icon" data-drawer-close="menu">
                    



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--close"></use>
</svg>

                    <span class="button__text">Hide menu</span>
                </button>
            </div>
        </div>

        <div class="drawer__content">
            <div class="drawer__menu">
                <nav class="nav nav--mobile" aria-label="Mobile menu">
                    <ul class="nav__list">
                        
                            <li class="nav__item">
                                
                                <a class="nav__link"
                                   href="/docs/">
                                    <span class="nav__text">Documentation</span>
                                </a>
                            </li>
                        
                            <li class="nav__item">
                                
                                <a class="nav__link"
                                   href="/play/">
                                    <span class="nav__text">Play</span>
                                </a>
                            </li>
                        
                            <li class="nav__item">
                                
                                <a class="nav__link"
                                   href="/community/">
                                    <span class="nav__text">Community</span>
                                </a>
                            </li>
                        

                        
                            <li class="nav__item">
                                
                                <a class="nav__link"
                                   href="/docs/introduction/installation/">
                                    <span class="nav__text">Install</span>
                                </a>
                            </li>
                        

                        <li class="nav__item nav__item--search">





<div data-search-autocomplete="drawer"
     data-searchbar-size="small"
     data-searchbar-placeholder=""
>
    <div id="autocomplete-drawer"></div>
</div>
</li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="drawer__footer">
            <nav class="nav nav--social" aria-label="Social">
                <ul class="nav__list">
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="https://github.com/cue-lang/cue"target="_blank" >
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--github"></use>
</svg>

                                <span class="nav__text">GitHub</span>
                            </a>
                        </li>
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="/s/slack">
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--slack"></use>
</svg>

                                <span class="nav__text">Slack</span>
                            </a>
                        </li>
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="/s/discord">
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-discord"></use>
</svg>

                                <span class="nav__text">Discord</span>
                            </a>
                        </li>
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="https://twitter.com/cue_lang"target="_blank" >
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-x"></use>
</svg>

                                <span class="nav__text">X (Twitter)</span>
                            </a>
                        </li>
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="https://bsky.app/profile/cuelang.org"target="_blank" >
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-bluesky"></use>
</svg>

                                <span class="nav__text">Bluesky</span>
                            </a>
                        </li>
                    
                        <li class="nav__item">
                            
                            <a class="nav__link"
                               href="https://www.youtube.com/@cuelang/videos"target="_blank" >
                                



<svg class="icon" aria-hidden="true">
    <use xmlns:xlink="http://www.w3.org/1999/xlink"
         xlink:href="/img/ui.svg#icon--social-youtube"></use>
</svg>

                                <span class="nav__text">YouTube</span>
                            </a>
                        </li>
                    
                </ul>
            </nav>
        </div>
    </div>
</div>

        

    
    <script src="/js/main.min.fd72c5ae1d2b05caf3dd2656685f4ae0de619cf5486b450c27d0f2412f90879f.js" integrity="sha256-/XLFrh0rBcrz3SZWaF9K4N5hnPVIa0UMJ9DyQS&#43;Qh58=" async></script>






    </body>
</html>
