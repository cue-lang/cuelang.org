---
title: Generating Go types from CUE definitions
tags: [encodings]
authors: [jpluscplusm]
toc_hide: true
---

CUE version 0.12.0 introduced an experimental new command:
[`gengotypes`]({{<relref"docs/reference/command/cue-help-exp-gengotypes">}}).
This command generates Go types from CUE definitions and places them in `.go`
files. It uses sensible defaults for some aspects of the generated Go code, and
allows them to be configured and overridden with CUE attributes.

This guide shows you how to use the `cue exp gengotypes` command.

## Generating Go types

{{< step stepNumber="1" >}}
Start with some CUE that contains at least one definition:
{{< code-tabs >}}
{{< code-tab name="pets.cue" language="cue" area="top-left" >}}
package pet

// These are the only pet types we can handle.
petTypes: ["dog", "cat", "goldfish"]

// aDog tracks information we hold about each dog.
#aDog: {
	// Dogs have at least one name.
	name!:     string
	age?:      float
	isGoodBoy: true
}
{{< /code-tab >}}{{< /code-tabs >}}

Hidden definitions (fields with identifiers starting with `_#`) are ignored by the `gengotypes` command.
{{< /step >}}

{{< step stepNumber="2" >}}
Run the `cue exp gengotypes` command targetting the single CUE package in the
current directory:

```text { title="TERMINAL" type="terminal" codeToCopy="Y3VlIGV4cCBnZW5nb3R5cGVzIC4KY2F0IGN1ZV90eXBlc19nZW4uZ28=" }
$ cue exp gengotypes .
$ cat cue_types_gen.go
// Code generated by "cue exp gengotypes"; DO NOT EDIT.

package pet

// aDog tracks information we hold about each dog.
type ADog struct {
	// Dogs have at least one name.
	Name string `json:"name"`

	Age float64 `json:"age,omitempty"`

	IsGoodBoy bool `json:"isGoodBoy"`
}
```
The command is silent when it succeeds.
{{< /step >}}

{{< step stepNumber="3" >}}
Observe the contents of the `cue_types_gen.go` file:
{{< code-tabs >}}
{{< code-tab name="cue_types_gen.go" language="go" area="top-left" >}}
// Code generated by "cue exp gengotypes"; DO NOT EDIT.

package pet

// aDog tracks information we hold about each dog.
type ADog struct {
	// Dogs have at least one name.
	Name string `json:"name"`

	Age float64 `json:"age,omitempty"`

	IsGoodBoy bool `json:"isGoodBoy"`
}
{{< /code-tab >}}{{< /code-tabs >}}
Notice these differences between the contents of
[`pets.cue`](#step-1)
and
[`cue_types_gen.go`](#step-3):

- The top-level `petTypes` field and its comment aren't present in the Go
  file. Only fields in a definition are translated to Go.
- The field `isGoodBoy` *always* has value of `true` in CUE, but the Go encodes
  a `bool` type. Generated Go types are guaranteed to accept any value accepted
  by the CUE definitions, but they may be more general.
{{< /step >}}

## Controlling the generated Go

If you need to control the generated Go package, type, and field names, you can
use the `@go()` attribute to specify them in your CUE:

{{< step stepNumber="4" >}}
Add another CUE file, `morePets.cue`, containing the following code:
{{< code-tabs >}}
{{< code-tab name="morePets.cue" language="cue" area="top-left" >}}
package pet

@go(acmecorppets)

// aCat represents an instance of Felis catus, the domestic cat.
#aCat: {
	@go(Cat)

	// Cats consider themselves to have a title, not a name.
	title!:              string @go(Name) // Maintain Go-level parity with Dogs.
	socialMediaAccount!: string @go(-)    // Don't emit this field as Go.
}

#aArdvark: {
	@go(-)
	status: "Unsupported"
}
{{< /code-tab >}}{{< /code-tabs >}}
{{< /step >}}

{{< step stepNumber="5" >}}
Run the `cue exp gengotypes` command again:

```text { title="TERMINAL" type="terminal" codeToCopy="Y3VlIGV4cCBnZW5nb3R5cGVzIC4KY2F0IGN1ZV90eXBlc19nZW4uZ28=" }
$ cue exp gengotypes .
$ cat cue_types_gen.go
// Code generated by "cue exp gengotypes"; DO NOT EDIT.

package acmecorppets

// aCat represents an instance of Felis catus, the domestic cat.
type Cat struct {
	// Cats consider themselves to have a title, not a name.
	Name string `json:"title"`
}

// aDog tracks information we hold about each dog.
type ADog struct {
	// Dogs have at least one name.
	Name string `json:"name"`

	Age float64 `json:"age,omitempty"`

	IsGoodBoy bool `json:"isGoodBoy"`
}
```
{{< /step >}}

{{< step stepNumber="6" >}}
Observe the new contents of the `cue_types_gen.go` file:
{{< code-tabs >}}
{{< code-tab name="cue_types_gen.go" language="go" area="top-left" >}}
// Code generated by "cue exp gengotypes"; DO NOT EDIT.

package acmecorppets

// aCat represents an instance of Felis catus, the domestic cat.
type Cat struct {
	// Cats consider themselves to have a title, not a name.
	Name string `json:"title"`
}

// aDog represents an instance of Canis lupus familiaris, the domestic dog.
type ADog struct {
	// Each dog has at least one name.
	Name string `json:"name"`

	Age float64 `json:"age,omitempty"`

	IsGoodBoy bool `json:"isGoodBoy"`
}
{{< /code-tab >}}{{< /code-tabs >}}
Notice these differences between the contents of
[`morePets.cue`](#step-4)
and the new
[`cue_types_gen.go`](#step-6):

- The package-level `@go(acmecorppets)` attribute renamed the generated Go
  package from `pet`.
  - Because your command targetted the whole of the `pet` package, the
    dog-related contents of `pets.cue` are included under the renamed Go
    package. Only one package-level attribute is needed.
- The definition-level `@go(Cat)` attribute renamed the generated Go type from
  `ACat`.
- The field-level `@go(Name`) attribute renamed the generated Go field from
  `Title`.
- The field-level `@go(-)` attribute caused the `socialMediaAccount` field to
  be omitted from the generated Go type.
- The definition-level `@go(-)` attribute caused the `aArdvark` type to be
  omitted from the generated Go.

You can also use the `@go()` attribute to control the *type* of a generated
field -- see
[`cue help exp gengotypes`]({{<relref"docs/reference/command/cue-help-exp-gengotypes">}})
for more information.
{{< /step >}}

{{<warning>}}
The `gengotypes` command is still in an experimental stage, which means that it
may be changed or removed at any time. The objective is for the CUE project to
gain experience through [your feedback]({{<relref"/community">}}) about this
experimental command, and then move the feature elsewhere.
{{</warning>}}

## Related content

- {{<linkto/related/reference"command/cue-help-exp-gengotypes">}} --
  the built-in help text for the `cue exp gengotypes` command
